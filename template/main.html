<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><!--link(rel='stylesheet', href='../style/fonts.css')--><link rel="stylesheet" href="../style/material.css"><link rel="stylesheet" href="../style/main.css"><script>document.addEventListener('keyup', function(e){
    if(e.keyCode === 123){ // F12
        require('nw.gui').Window.get().showDevTools();
    }
});</script><script src="../resource/library/underscore.js"></script><script src="../resource/library/StackBlur.js"></script><script src="../resource/library/jquery.js"></script><script src="../resource/library/angular.js"></script><script src="../resource/library/bindonce.js"></script><!--script(src='../resource/library/once.js')--><script src="../resource/library/localforage.js"></script><script src="../resource/library/angular-localForage.js"></script><script src="../resource/library/checklist-model.js"></script><script src="../resource/library/quick-ng-repeat.js"></script><script>var App = angular.module('XiamiThief', ['LocalForageModule', 'checklist-model', 'QuickList']);</script><script src="../script/main.js"></script><script src="../script/filter.js"></script><script src="../script/directive.js"></script><script src="../script/control.js"></script><script src="../script/dialog.js"></script><title>XiamiThief v0.6</title></head><body ng-app="XiamiThief" class="font-hei"><canvas id="bg"></canvas><header><div ng-controller="InfoCtrl" class="information"><div ng-style="{'background-image': user.avatar ? 'url(' + user.avatar + ')' : url('../r+esource/image/usr100.gif')}" class="avatar"></div><!--.username {{ user.name || '未登录' }}--></div></header><div ng-controller="TaskCtrl" class="main"><!--asideul
    li 正在下载
    li 已完成--><!--article--><ul><li quick-ng-repeat="(taskIndex, task) in list" quick-repeat-list="tasks" ng-if="task" ng-hide="task.hide"><div ng-click="task.expand = !task.expand" right-click="popupMenuTask($event, task, taskIndex)" class="task"><img ng-src="{{ task.cover.url | picSize: 1}}" image-size="task.expand ? 100 : 55" class="cover"><div process="task.process" state="task.state"><span class="type">{{ task.type | type2name }}</span><span class="name">{{ task.name }}</span></div><!--button.close(ng-click='removeTask(taskIndex)') 移除--></div><ul ng-show="task.expand"><li ng-repeat="(trackIndex, track) in task.list" process="track.process" state="track.state" right-click="popupMenuTrack($event, track)" ng-class="{&quot;hq&quot;: isHq(track)}" class="track">{{ track.song.name }}<!--| {{ track.song.url }}--><button ng-if="track.state == State.Fail" ng-click="track.state = State.Ready; task.state = State.Ready; check()">重试</button></li></ul></li><!--ul.tasktask(quick-ng-repeat='task in list', quick-repeat-list='task')--></ul><!--articleul.task.run 
    //| 正在下载
    //task(ng-repeat='task in run track by task.id')
    task(quick-ng-repeat='task in run', quick-repeat-list='run')
ul.task.pre
    //| 准备下载
    //task(ng-repeat='task in pre track by task.id')
    task(quick-ng-repeat='task in pre', quick-repeat-list='pre')
ul.task.end
    //| 下载完成
    //task(ng-repeat='task in end track by task.id')
    task(quick-ng-repeat='task in end', quick-repeat-list='end')
ul.task.err
    //| 下载失败
    //task(ng-repeat='task in err track by task.id')1
    task(quick-ng-repeat='task in err', quick-repeat-list='err')--></div><!--footer--><div class="dialog"><div ng-controller="CreateCtrl" class="create"><div ng-show="step === 1" class="title">在下方输入你要下载的音乐所在页面的URL地址, 多个URL请换行.</div><textarea autofocus ng-show="step === 1" ng-model="links" right-click="popupMenuEditor($event)" ng-paste="pasteHandle()" class="links"></textarea><button ng-show="step === 1" ng-click="analyze()" class="submit">分析</button><ul ng-show="step === 2" class="list"><li ng-repeat="(taskIndex, task) in data"><input id="task{{ taskIndex }}" type="checkbox" ng-click="checkAll($index)" ng-model="task.checkAll"><label for="task{{ taskIndex }}"><span class="type">{{ task.type | type2name }} </span><span class="name">{{ task.name }}</span></label><span ng-click="task.expand = !task.expand" ng-class="{&quot;expand-up&quot;: task.expand,&quot;expand-down&quot;: !task.expand}"></span><ul ng-show="task.expand"><li ng-repeat="(trackIndex, track) in task.list"><input id="task{{ taskIndex }}-{{ trackIndex }}" type="checkbox" checklist-model="task.checked" checklist-value="track" ng-model="checked" ng-click="check(taskIndex, trackIndex)"><label for="task{{ taskIndex }}-{{ trackIndex }}">{{ track.song.name }}</label></li></ul></li></ul><div ng-show="step === 2" class="flex-row"><button ng-click="createTask()">下载</button><button ng-click="step = 1">放弃</button></div></div><div ng-controller="SetupCtrl" class="setup"><ul class="list"><li ng-click="toggle(&quot;li.login&quot;)">帐号设置</li><li ng-click="toggle(&quot;li.config&quot;)">下载设置</li><li ng-click="toggle(&quot;li.network&quot;)">网络设置</li><li ng-click="toggle(&quot;li.id3&quot;)">ID3设置</li></ul><ul class="content"><li ng-controller="LoginCtrl" style="display:flex" class="login"><h1>帐号设置</h1><form ng-hide="user.logged" class="caption"><h2 class="subhead loginByUserData">常规登录(仅支持虾米帐号)</h2><label for="email">Email</label><input id="email" type="email" ng-model="email" name="email"><label for="password" minlength="6" maxlength="16">密码</label><input id="password" type="password" ng-model="password" name="password"><div ng-show="validateUrl"><label for="validateUrl">验证码</label><input id="validate" type="text" ng-model="validate" name="validate"><img ng-src="{{ validateUrl }}"></div><label for="rememberAccount"><input id="remember" type="checkbox" ng-model="remember" name="remember">记住我</label><button ng-click="loginByUserData()">登录</button><h2 class="subhead loginByWebPage">网页登录(支持淘宝帐号等第三方登录)</h2><button ng-click="loginByWeb()">网页登录</button><!--iframe.loginPage(nwdisable, nwfaketop, iframe-onload="loginPageLoad()")--><h2 class="subhead loginByCookie">手动输入Cookie(高级)</h2><label for="cookie">Cookie</label><input id="cookie" type="text" ng-model="cookie" name="cookie"><button ng-click="loginByCookie()">登录</button><!--iframe.loginPage(nwfaketop, iframe-onload="loginPageLoad()")--><!--| 淘宝登录(测试)--><!--iframe(ng-src='{{ taobaoLoginPage }}', nwdisable, nwfaketop, iframe-onload="taobaoPageLoad()")--><!--iframe(nwdisable, nwfaketop, iframe-onload="taobaoPageLoad()")--></form><div ng-show="user.logged" class="caption"><p>用户名: {{ user.name }}</p><p ng-show="user.isVip">VIP帐号</p><p ng-hide="user.isVip">普通帐号</p><p ng-show="user.isMusician">虾米音乐人</p><p>等级: {{ user.level.name }}({{ user.level.num }}) {{ user.level.credit }}/{{ user.level.creditLimit }}</p><p>成就: {{ user.pyramid }}星</p><p>已签到{{ user.sign.num }}天</p><button ng-click="sign()" ng-hide="user.sign.hasCheck">签到</button><button ng-click="logout()">注销</button></div></li><li ng-controller="ConfigCtrl" class="config"><h1>下载设置</h1><form class="caption"><h2 class="subhead">保存路径</h2><!--.flex-row--><input id="savePath" type="text" local-forage="config.savePath" ng-model="config.savePath"><button ng-click="openFolderChooseDialog()" style="width: 60px" class="no-flex">选择</button><h2 class="subhead">下载</h2><label for="taskLimitMax">最大同时任务数:</label><input id="taskLimitMax" type="number" max="10" min="1" step="1" local-forage="config.taskLimitMax" ng-model="config.taskLimitMax"><label for="useMonitoringClipboard"><input id="useMonitoringClipboard" type="checkbox" local-forage="config.useMonitoringClipboard" ng-model="config.useMonitoringClipboard">监控剪切板中的链接</label><label for="hasLyric"><input id="hasLyric" type="checkbox" local-forage="config.hasLyric" ng-model="config.hasLyric">同时下载歌词</label><label for="hasCover"><input id="hasCover" type="checkbox" local-forage="config.hasCover" ng-model="config.hasCover">同时下载封面</label><label for="hasId3"><input id="hasId3" type="checkbox" local-forage="config.hasId3" ng-model="config.hasId3">添加ID3V2.3信息(更多设置在ID3设置页中)</label><h2 class="subhead">文件命名</h2>保存目录结构:<label for="saveDirect"><input id="saveDirect" type="radio" name="saveMode" local-forage="config.saveMode" ng-model="config.saveMode" value="direct">直接保存在根目录, 所有下载都会以单曲形式直接保存在{{ config.savePath }}根目录下.</label><label for="saveAlwaysClassification"><input id="saveAlwaysClassification" type="radio" name="saveMode" local-forage="config.saveMode" ng-model="config.saveMode" value="alwaysClassification">全部以 艺人/专辑/碟片号/歌曲 分类保存, 碟片数只有一张时会省略.</label><label for="saveSmartClassification"><input id="saveSmartClassification" type="radio" name="saveMode" local-forage="config.saveMode" ng-model="config.saveMode" value="smartClassification"><!--input#useDirectory(type='checkbox', local-forage='config.useDirectory', ng-model='config.useDirectory')-->智能分类, 会按以下规则以目录结构分类保存</label><div>下载单曲时是 {{ config.filenameFormat | preview:'song' }}.mp3<br/>
下载专辑时是 {{ config.foldernameFormat | preview:'album' }}/{{ config.filenameFormat | preview:'song' }}.mp3<br/>
下载精选集时是 精选集名/{{ config.filenameFormat | preview:'song' }}.mp3<br/>
下载艺人热门歌曲时是 艺人名/{{ config.filenameFormat | preview:'song' }}.mp3<br/>
</div><br><label for="foldernameFormat">目录名格式(仅对目录结构的专辑下载有效)</label><input id="foldernameFormat" type="text" local-forage="config.foldernameFormat" ng-model="config.foldernameFormat">效果预览: {{ config.foldernameFormat | preview:'album' }}<div>使用/可以构建多层目录, 比如%ARTIST%/%NAME%<br/>
可用变量:<br/>
%NAME% {{ '%NAME%' | preview:'album' }}<br/>
%ARTIST% {{ '%ARTIST%' | preview:'album' }}<br/>
%COMPANY% {{ '%COMPANY%' | preview:'album' }}<br/>
%TIME% {{ '%TIME%' | preview:'album' }}<br/>
%LANGUAGE% {{ '%LANGUAGE%' | preview:'album' }}<br/>
</div><br><label for="filenameFormat">文件名格式:</label><input id="filenameFormat" type="text" local-forage="config.filenameFormat" ng-model="config.filenameFormat">效果预览: {{ config.filenameFormat | preview:'song' }}.mp3<div>可用变量:<br/>
%NAME% {{ '%NAME%' | preview:'song' }}<br/>
%ARTIST% {{ '%ARTIST%' | preview:'song' }}<br/>
%ALBUM% {{ '%ALBUM%' | preview:'song' }}<br/>
%TRACK% {{ '%TRACK%' | preview:'song' }}<br/>
%DISC% {{ '%DISC%' | preview:'song' }}<br/>
</div><br>当文件已存在时的解决方案:<label for="alwaysCover"><input id="alwaysCover" type="radio" name="fileExistSolution" local-forage="config.fileExistSolution" ng-model="config.fileExistSolution" value="alwaysCover">总是覆盖</label><label for="alwaysSkip"><input id="alwaysSkip" type="radio" name="fileExistSolution" local-forage="config.fileExistSolution" ng-model="config.fileExistSolution" value="alwaysSkip">总是跳过</label><label for="coverSmallFile"><input id="coverSmallFile" type="radio" name="fileExistSolution" local-forage="config.fileExistSolution" ng-model="config.fileExistSolution" value="coverSmallFile">当新文件比旧文件大时覆盖</label><label for="filenameTimestamp"><input id="filenameTimestamp" type="radio" name="fileExistSolution" local-forage="config.fileExistSolution" ng-model="config.fileExistSolution" value="filenameTimestamp">为新文件的文件名添加时间戳</label></form></li><li ng-controller="NetworkCtrl" class="network"><h1>网络设置</h1><form class="caption">代理服务器:<label for="useProxy"><input id="useProxy" type="radio" name="proxySelect" local-forage="config.useProxy" ng-model="config.useProxy" value="false">不使用</label><label for="notUseProxy"><input id="notUseProxy" type="radio" name="proxySelect" local-forage="config.useProxy" ng-model="config.useProxy" value="true">使用</label><label for="proxy-host">服务器:</label><input id="proxy-host" type="text" local-forage="config.proxy.host" ng-model="config.proxy.host" enabled="config.useProxy === &quot;true&quot;"><label for="proxy-port">端口:</label><input id="proxy-hort" type="number" local-forage="config.proxy.port" ng-model="config.proxy.port" enabled="config.useProxy === &quot;true&quot;"><label for="proxy-username">用户名:</label><input id="proxy-username" type="text" local-forage="config.proxy.username" ng-model="config.proxy.username" enabled="config.useProxy === &quot;true&quot;"><label for="proxy-password">密码:</label><input id="proxy-password" type="password" local-forage="config.proxy.password" ng-model="config.proxy.password" enabled="config.useProxy === &quot;true&quot;"></form></li><li ng-controller="Id3Ctrl" class="id3"><h1>ID3设置</h1><form class="caption"><label for="id3-hasTitle"><input id="id3-hasTitle" type="checkbox" local-forage="config.id3.hasTitle" ng-model="config.id3.hasTitle">标题 (歌名/曲名)</label><label for="id3-hasArtist"><input id="id3-hasArtist" type="checkbox" local-forage="config.id3.hasArtist" ng-model="config.id3.hasArtist">参与创作的艺术家 (主唱/演奏者)</label><label for="id3-hasAlbumArtist"><input id="id3-hasAlbumArtist" type="checkbox" local-forage="config.id3.hasAlbumArtist" ng-model="config.id3.hasAlbumArtist">唱片集艺术家 (主唱/演奏者/乐队)</label><label for="id3-hasAlbum"><input id="id3-hasAlbum" type="checkbox" local-forage="config.id3.hasAlbum" ng-model="config.id3.hasAlbum">唱片集 (专辑名)</label><label for="id3-hasYear"><input id="id3-hasYear" type="checkbox" local-forage="config.id3.hasYear" ng-model="config.id3.hasYear">年 (发行年份)</label><label for="id3-hasTrack"><input id="id3-hasTrack" type="checkbox" local-forage="config.id3.hasTrack" ng-model="config.id3.hasTrack"># (音轨号)</label><label for="id3-hasGenre"><input id="id3-hasGenre" type="checkbox" local-forage="config.id3.hasGenre" ng-model="config.id3.hasGenre">流派 (风格)</label><label for="id3-hasDisc"><input id="id3-hasDisc" type="checkbox" local-forage="config.id3.hasDisc" ng-model="config.id3.hasDisc">部分设置 (碟片号)</label><label for="id3-hasLyric"><input id="id3-hasLyric" type="checkbox" local-forage="config.id3.hasLyric" ng-model="config.id3.hasLyric">歌词</label><label for="id3-hasCover"><input id="id3-hasCover" type="checkbox" local-forage="config.id3.hasCover" ng-model="config.id3.hasCover">专辑封面</label>专辑封面尺寸:<label for="id3-cover-size-original"><input id="id3-cover-size-original" type="radio" name="coverSize" local-forage="config.id3.cover.size" ng-model="config.id3.cover.size" value="original">原始大小(不限制封面图片长度)</label><label for="id3-cover-size-standard"><input id="id3-cover-size-standard" type="radio" name="coverSize" local-forage="config.id3.cover.size" ng-model="config.id3.cover.size" value="standard">标准大小(最长边限制最大640像素, 按比例缩放, 与虾米客户端一致)</label><label for="id3-cover-size-custom"><input id="id3-cover-size-custom" type="radio" name="coverSize" ng-model="config.id3.cover.size" value="custom">自定义最长边长度(单位像素, 按比例缩放):</label><input id="coverMaxHeight" type="number" max="1000" min="10" step="10" local-forage="config.id3.cover.maxSide" ng-model="config.id3.cover.maxSide" enabled="config.id3.cover.size === &quot;custom&quot;"></form></li></ul></div><!--.feedback.title 请写下您的意见和建议
textarea
button.submit 提交--><!--.update(ng-controller='UpdateCtrl').content 未发现新版本
button(ng-click='check()') 检查更新--><!--.about(ng-controller='AboutCtrl')include about--><div ng-controller="ExitCtrl" class="exit"><div class="title">是否退出?</div><div class="flex-row"><button ng-click="exit()" class="yes">是</button><button ng-click="hide()" class="no">否</button></div></div></div><nav ng-controller="ControlCtrl" class="control"><!--.button-menu(ng-click='popupMenuStart($event)')--><div ng-click="minimize()" class="button-minimize"></div><div ng-class="{'button-restore': isMaximize}" ng-click="zoom()" class="button-maximize"></div><div ng-click="close()" class="button-close"></div></nav><nav ng-controller="TaskCtrl" class="start"><div ng-click="showCreateDialog()" class="button-create">新建任务</div><div ng-click="showSetupDialog()" class="button-setup">软件设置</div></nav></body></html>